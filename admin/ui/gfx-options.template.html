{{#each list }}
<span id="{{../idPrefix}}-{{@index}}">
  <h3>
    <button onclick="removeGfxOption(this,'{{../../idPrefix}}-{{@../index}}-{{@index}}')">x</button>
    {{name}}
  </h3>
  <ul id="{{../idPrefix}}-{{@index}}-list">
    {{#each values}}
    <li
      optionName={{slug this}}
      id="{{../../idPrefix}}-{{@../index}}-{{@index}}"
    >
      <button
        id="gfx-options-{{slug ../name}}-{{slug this}}-delete-input"
        hx-delete="/page/test"
        hx-vals='{"name": "{{../name}}", "value": "{{this}}"}'
        hx-swap="none"
        hx-on:htmx:after-request="update(event, '#gfx-options-list', 'load')"
      >
        x
      </button>
      <span>{{this}}</span>
      <input
        type="text"
        name="gfx-options-name-input"
        id="gfx-options-{{slug ../name}}-{{slug this}}-update-input"
        oninput="updateGfxOptionsPreviewName(this)"
      />
      <button
        hx-patch="/page/test"
        hx-vals='js:{
                  name: "{{../name}}",
                  old: "{{this}}",
                  new: document.getElementById("gfx-options-{{slug ../name}}-{{slug this}}-update-input").value
                  }'
        hx-swap="none"
        hx-on:htmx:after-request="update(event, '#gfx-options-list', 'load')"
      >
        Update
      </button>
    </li>
    {{/each}}
  </ul>
  <div>
    <label for="gfx-options-{{slug name}}-add-value-input">New value:</label>
    <input
      type="text"
      name="gfx-options-{{slug name}}-add-value-input"
      id="gfx-options-{{slug name}}-add-value-input"
    />
    <button
      hx-post="/page/test"
      hx-vals='js:{
               name: "{{name}}",
               value: document.getElementById("gfx-options-{{slug name}}-add-value-input").value
               }'
      hx-swap="none"
      hx-on:htmx:after-request="update(event, '#gfx-options-list', 'load')"
    >
      Add
    </button>
  </div>
</span>
{{/each}}
